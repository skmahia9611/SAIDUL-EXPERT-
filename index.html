
<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FBG Panel</title>
<style>
body{font-family:sans-serif;margin:0;padding:0;background:#f1f1f1;}
header{background:#0088cc;color:white;padding:15px;text-align:center;font-size:20px;}
section{padding:20px;}
.card{background:white;padding:15px;margin:10px 0;border-radius:8px;box-shadow:0 2px 5px rgba(0,0,0,0.1);}
button{padding:10px 20px;border:none;border-radius:5px;background:#0088cc;color:white;font-size:16px;cursor:pointer;}
button:disabled{background:#aaa;cursor:not-allowed;}
#withdrawModal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);justify-content:center;align-items:center;}
#withdrawModal .modal-content{background:white;padding:20px;border-radius:10px;width:90%;max-width:400px;}
.ok{color:green;}
.bad{color:red;}
</style>
</head>
<body>

<header>üîê FBG Panel</header>

<section>
  <div class="card">User ID: <span id="uid">‚Äî</span></div>
  <div class="card">Total Balance: ‡ß≥<span id="totalBal">0.00</span></div>
  <div class="card">Today Earned: ‡ß≥<span id="today">0.00</span></div>
  <div class="card">Points: <span id="points">0</span> (~‡ß≥<span id="pointsTk">0.00</span>)</div>
  <button id="watchAdBtn">‚ñ∂Ô∏è EARN (Ad)</button>
</section>

<section>
  <button id="withdrawBtn">üí≥ Withdraw</button>
</section>

<div id="withdrawModal">
  <div class="modal-content">
    <h3>Withdraw</h3>
    <label>Method:</label>
    <select id="wdMethod">
      <option>‡¶®‡¶ó‡¶¶</option>
      <option>‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂</option>
      <option>Binance PAY ID</option>
    </select><br><br>
    <label>Amount ‡ß≥:</label>
    <input type="number" id="wdAmount" placeholder="‡ß≥50+" min="50" style="width:100%;padding:8px;"><br><br>
    <label>Account/Wallet:</label>
    <input type="text" id="wdAccount" placeholder="Account Number" style="width:100%;padding:8px;"><br><br>
    <label>Name:</label>
    <input type="text" id="wdName" placeholder="Your Name" style="width:100%;padding:8px;"><br><br>
    <div id="calcBox"></div><br>
    <button id="withdrawConfirm" disabled>Submit Withdraw</button>
  </div>
</div>

<script>
const els={totalBal:document.getElementById('totalBal'),today:document.getElementById('today'),points:document.getElementById('points'),pointsTk:document.getElementById('pointsTk'),watchBtn:document.getElementById('watchAdBtn')};
const RATE=100, REWARD=10, MIN_WITHDRAW=50;
let saved=JSON.parse(localStorage.getItem('fbg_data')||'{}');
let points=saved.points||0, balance=saved.balance||0, today=saved.today||0;
function fmt(x){return (Math.round(x*100)/100).toFixed(2);} 
function sync(){els.points.textContent=points;els.pointsTk.textContent=fmt(points/RATE);els.totalBal.textContent=fmt(balance);els.today.textContent=fmt(today);localStorage.setItem('fbg_data',JSON.stringify({points,balance,today}));}
sync();
function rewardUser(){points+=REWARD;balance+=REWARD/RATE;today+=REWARD/RATE;sync();alert(`‡¶Ö‡¶≠‡¶ø‡¶®‡¶®‡ßç‡¶¶‡¶®! +${REWARD} ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü (‡ß≥${fmt(REWARD/RATE)})`);}
els.watchBtn.addEventListener('click',()=>{els.watchBtn.disabled = true;els.watchBtn.textContent = "‚è≥ Ad Running...";setTimeout(()=>{rewardUser();els.watchBtn.disabled = false;els.watchBtn.textContent = "‚ñ∂Ô∏è EARN (Ad)";}, 16000);});

const wModal=document.getElementById('withdrawModal'),withdrawBtn=document.getElementById('withdrawBtn'),withdrawConfirm=document.getElementById('withdrawConfirm'),wdMethod=document.getElementById('wdMethod'),wdAmount=document.getElementById('wdAmount'),wdAccount=document.getElementById('wdAccount'),wdName=document.getElementById('wdName'),calcBox=document.getElementById('calcBox');
withdrawBtn.addEventListener('click', ()=>{wModal.style.display='flex'; updateCalculation();});
function updateCalculation(){const amount = parseFloat(wdAmount.value)||0;const needPoints = Math.ceil(amount*RATE);let msg = `üßÆ ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨: ‡ß≥${fmt(amount)} (‚âà ${needPoints} ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü)\nüí≥ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏: ‡ß≥${fmt(balance)} (‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ${points})`;const okMin = amount >= MIN_WITHDRAW, okBal = amount <= balance, okAcc = (wdAccount.value||'').trim().length >= 5;if(!okMin) msg += `\n‚ùå ‡¶®‡ßç‡¶Ø‡ßÇ‡¶®‡¶§‡¶Æ ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡ß≥${MIN_WITHDRAW}`;if(!okBal) msg += `\n‚ùå ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶®‡ßá‡¶á`;if(!okAcc) msg += `\n‚ùå ‡¶∏‡¶†‡¶ø‡¶ï ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü/‡¶ì‡¶Ø‡¶º‡¶æ‡¶≤‡ßá‡¶ü ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶¶‡¶ø‡¶®`;if(okMin && okBal && okAcc){msg += `\n‚úÖ ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®`;withdrawConfirm.disabled=false;calcBox.classList.remove('bad');calcBox.classList.add('ok');} else {withdrawConfirm.disabled=true;calcBox.classList.remove('ok');calcBox.classList.add('bad');}calcBox.innerText = msg;}
wdMethod.addEventListener('change', updateCalculation);wdAmount.addEventListener('input', updateCalculation);wdAccount.addEventListener('input', updateCalculation);

let CHAT_ID = null;
let USER_ID = null;

// Telegram WebApp integration
if(window.Telegram?.WebApp){
  const tg = window.Telegram.WebApp;
  tg.ready();
  if(tg.initDataUnsafe?.user){
    USER_ID = tg.initDataUnsafe.user.id;
    CHAT_ID = tg.initDataUnsafe.user.id;
    document.getElementById('uid').textContent = USER_ID;
  } else {
    document.body.innerHTML = "<div style='padding:20px;text-align:center;font-size:18px;color:red;'>‚ùå Telegram ‡¶•‡ßá‡¶ï‡ßá ‡¶ì‡¶™‡ßá‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</div>";
  }
} else {
  document.body.innerHTML = "<div style='padding:20px;text-align:center;font-size:18px;color:red;'>‚ùå Telegram ‡¶•‡ßá‡¶ï‡ßá ‡¶ì‡¶™‡ßá‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</div>";
}

const BOT_TOKEN = "YOUR_BOT_TOKEN"; 
const TELEGRAM_URL = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;

withdrawConfirm.addEventListener('click', ()=>{
  const method = wdMethod.options[wdMethod.selectedIndex].text;
  const amount = parseFloat(wdAmount.value)||0;
  const account = (wdAccount.value||'').trim();
  const name = (wdName.value||'').trim();
  if(amount < MIN_WITHDRAW){alert(`‡¶®‡ßç‡¶Ø‡ßÇ‡¶®‡¶§‡¶Æ ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡ß≥${MIN_WITHDRAW}`); return;}
  if(amount > balance){alert("‚ùå ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶®‡ßá‡¶á"); return;}
  if(account.length < 5){alert("‡¶∏‡¶†‡¶ø‡¶ï ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü/‡¶ì‡¶Ø‡¶º‡¶æ‡¶≤‡ßá‡¶ü ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶¶‡¶ø‡¶®"); return;}
  balance -= amount;const deductPoints = Math.min(points, Math.ceil(amount*RATE));points -= deductPoints;sync();
  const msg = `üì§ Withdraw Request\nüë§ User ID: ${USER_ID}\nüí≥ Method: ${method}\nüí∞ Amount: ‡ß≥${fmt(amount)}\nüì± Account: ${account}\nüë§ Name: ${name}\nüîó Chat ID: ${CHAT_ID}`;
  fetch(TELEGRAM_URL, {method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:CHAT_ID,text:msg,parse_mode:"HTML"})})
  .then(r=>r.json()).then(d=>{alert(`‚úÖ Withdraw Submitted!\n‡ß≥${fmt(amount)} via ${method}`);wModal.style.display='none';})
  .catch(err=>{console.error(err);alert("‚ùå Telegram ‡¶è ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá");});
});

const modal = document.getElementById('withdrawModal');
modal.addEventListener('click',e=>{if(e.target===modal)modal.style.display='none';});
</script>

</body>
</html>
