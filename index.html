<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LIFS ‚Äì Earn & Withdraw</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f7f7f7; margin:0; padding:0; }
    header { background:#2c3e50; color:#fff; padding:15px; text-align:center; }
    .container { padding:20px; }
    .balance-box { background:#fff; padding:15px; border-radius:10px; box-shadow:0 2px 5px rgba(0,0,0,0.1); margin-bottom:15px; }
    .btn { display:inline-block; background:#27ae60; color:#fff; padding:10px 20px; border-radius:8px; text-decoration:none; cursor:pointer; }
    .btn:disabled { background:#95a5a6; cursor:not-allowed; }
    .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); justify-content:center; align-items:center; }
    .modal-content { background:#fff; padding:20px; border-radius:12px; width:90%; max-width:400px; }
    .form-group { margin-bottom:12px; }
    .form-group label { display:block; margin-bottom:5px; font-size:14px; }
    .form-group input, .form-group select { width:100%; padding:8px; border:1px solid #ccc; border-radius:6px; }
  </style>
</head>
<body>
  <header>
    <h2>LIFS ‚Äì Earn & Withdraw</h2>
  </header>

  <div class="container">
    <div class="balance-box">
      <p>üë§ Telegram Chat ID: <span id="chatId">Loading...</span></p>
      <p>üí∞ Balance: ‡ß≥<span id="balance">120</span></p>
      <button class="btn" id="withdrawBtn">Withdraw</button>
    </div>
  </div>

  <!-- Withdraw Modal -->
  <div class="modal" id="wModal">
    <div class="modal-content">
      <h3>Withdraw Request</h3>
      <div class="form-group">
        <label>Method</label>
        <select id="wdMethod">
          <option>‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂</option>
          <option>‡¶®‡¶ó‡¶¶</option>
          <option>Binance Pay</option>
        </select>
      </div>
      <div class="form-group">
        <label>Amount (Min ‡ß≥50)</label>
        <input type="number" id="wdAmount" placeholder="‡ß≥ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®">
      </div>
      <div class="form-group">
        <label>Account/Wallet</label>
        <input type="text" id="wdAccount" placeholder="‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶¶‡¶ø‡¶®">
      </div>
      <button class="btn" id="withdrawConfirm">Confirm</button>
    </div>
  </div>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script>
    const tg = window.Telegram.WebApp;
    const user = tg.initDataUnsafe.user;

    let CHAT_ID = null;
    if (user && user.id) {
      CHAT_ID = user.id;
      document.getElementById("chatId").textContent = CHAT_ID;
    } else {
      document.getElementById("chatId").textContent = "‚ùå Telegram ‡¶è ‡¶ñ‡ßÅ‡¶≤‡ßÅ‡¶®";
    }

    let balance = 120;
    const MIN_WITHDRAW = 50;
    const BOT_TOKEN = "7950127896:AAEeHiNM-T-XC0zI6x5FDc6PfsZmy0Y3egM";
    const TELEGRAM_URL = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;

    const wModal = document.getElementById('wModal');
    document.getElementById('withdrawBtn').onclick = ()=> wModal.style.display='flex';

    document.getElementById('withdrawConfirm').onclick = ()=>{
      const method = document.getElementById('wdMethod').value;
      const amount = parseFloat(document.getElementById('wdAmount').value)||0;
      const account = document.getElementById('wdAccount').value.trim();

      if(amount < MIN_WITHDRAW){alert(`‡¶®‡ßç‡¶Ø‡ßÇ‡¶®‡¶§‡¶Æ ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡ß≥${MIN_WITHDRAW}`); return;}
      if(amount > balance){alert("‚ùå ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶®‡ßá‡¶á"); return;}
      if(!CHAT_ID){alert("‚ùå Telegram ‡¶è ‡¶ñ‡ßÅ‡¶≤‡ßÅ‡¶®"); return;}

      balance -= amount;
      document.getElementById("balance").textContent = balance;

      const msg = `üì§ Withdraw Request\nüë§ Chat ID: ${CHAT_ID}\nüí≥ Method: ${method}\nüí∞ Amount: ‡ß≥${amount}\nüì± Account: ${account}`;

      fetch(TELEGRAM_URL, {
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({chat_id:CHAT_ID,text:msg})
      }).then(r=>r.json()).then(d=>{
        alert("‚úÖ Withdraw Submitted!");
        wModal.style.display='none';
      }).catch(err=>{
        console.error(err);
        alert("‚ùå Telegram ‡¶è ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá");
      });
    };
  </script>
</body>
</html>
